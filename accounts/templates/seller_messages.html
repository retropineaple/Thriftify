<!DOCTYPE html>
<html>
<head>
    <title>Seller Messages</title>
</head>
<body>
    <h2>Seller Messages</h2>
    <ul>
        {% for message in messages %}
        <li>
            <p>Message: {{ message.content }}</p>
            <p>Item: {{ message.item.name }}</p>
            <p>Buyer: {{ message.sender.username }}</p>
            <p>Category: {% if message.sender.username == user.username %}Sent{% else %}Received{% endif %}</p>
            {% if message.status == 'pending' %}
            <form action="{% url 'handle_message' message.id %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="accept">
                <button type="submit">Accept</button>
            </form>
            <form action="{% url 'handle_message' message.id %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="decline">
                <button type="submit">Decline</button>
            </form>
            <form action="{% url 'send_additional_message' message.id %}" method="post">
                {% csrf_token %}
                <textarea name="additional_message" rows="3" cols="50"></textarea><br>
                <button type="submit">Send Additional Message</button>
            </form>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</body>
</html>
